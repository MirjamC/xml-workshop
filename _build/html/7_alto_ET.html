
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>7. Practical: Extract information from the Alto format with ElemenTree &#8212; Automatically extract XML content with Python</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8. Practical session: Alto and Elementree" href="8_tei_ET.html" />
    <link rel="prev" title="6. Introduction to the Alto, TEI and Page format" href="6_xmlformats_intro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Automatically extract XML content with Python</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Welcome to this XML course
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="1_introduction_python.html">
   Lesson 1: Introduction to Python and Jupyter Notebooks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2_introduction_xml.html">
   2. Introduction to XML
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3_introduction_packages.html">
   3. Introduction to the packages ElemenTree and Beautiful Soup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="4_example_ET.html">
   4. Practical session: Working with ElemenTree
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5_example_BS.html">
   5. Practical session: Working with Beautful Soup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6_xmlformats_intro.html">
   6. Introduction to the Alto, TEI and Page format
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   7. Practical: Extract information from the Alto format with ElemenTree
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="8_tei_ET.html">
   8. Practical session: Alto and Elementree
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="9_page_ET.html">
   9. Practical session: Page and Elementree
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10_alto_BS.html">
   10. Practical session: Alto and Beautiful Soup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11_tei_BS.html">
   11. Practical session: Tei and Beautiful Soup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="12_page_BS.html">
   12. Practical session: Page and Beautiful Soup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="13_auto_batch.html">
   13. Practical session: Automatically extraxt information from a batch of files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="14_bonus_didl.html">
   14. Bonus practical lesson: a short introduction to extraxting from Didl
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="15_end.html">
   End of course
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="markdown.html">
   Markdown
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="notebooks.html">
   Content with notebooks
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="markdown-notebooks.html">
   Notebooks with MyST Markdown
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="_sources/7_alto_ET.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/7_alto_ET.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/xml-workshop"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/executablebooks/xml-workshop/issues/new?title=Issue%20on%20page%20%2F7_alto_ET.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/xml-workshop/master?urlpath=tree/docs/7_alto_ET.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#import-elementree-and-import-the-xml-file">
   Import ElemenTree and import the xml file
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examine-the-structure-of-the-file">
   Examine the structure of the file
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extract-the-plain-text">
   Extract the plain text
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#namespaces">
     namespaces
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#this-is-old-stuff">
     This is old stuff!
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extract-name-and-surname-of-the-author">
   Extract name and surname of the author
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extraxt-the-book-identifier">
   Extraxt the book identifier
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#structure-all-information">
   Structure all information
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#store-the-information-in-a-csv-or-txt-file">
   Store the information in a .csv or .txt file.
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#store-in-one-file">
     Store in one file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-a-textfile-per-book">
     Create a textfile per book
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extra-filter-information">
   Extra: Filter information
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>7. Practical: Extract information from the Alto format with ElemenTree</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#import-elementree-and-import-the-xml-file">
   Import ElemenTree and import the xml file
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examine-the-structure-of-the-file">
   Examine the structure of the file
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extract-the-plain-text">
   Extract the plain text
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#namespaces">
     namespaces
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#this-is-old-stuff">
     This is old stuff!
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extract-name-and-surname-of-the-author">
   Extract name and surname of the author
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extraxt-the-book-identifier">
   Extraxt the book identifier
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#structure-all-information">
   Structure all information
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#store-the-information-in-a-csv-or-txt-file">
   Store the information in a .csv or .txt file.
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#store-in-one-file">
     Store in one file
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-a-textfile-per-book">
     Create a textfile per book
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#extra-filter-information">
   Extra: Filter information
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="practical-extract-information-from-the-alto-format-with-elementree">
<h1>7. Practical: Extract information from the Alto format with ElemenTree<a class="headerlink" href="#practical-extract-information-from-the-alto-format-with-elementree" title="Permalink to this headline">¶</a></h1>
<p>In this lesson, we are going to extract the plain text and some additional information from an Alto file containing a Dutch newspaper.
We assume that you have followed the practical lesson 4. We will reference to corresponding parts of that lesson so you can check how it worked.</p>
<p>We follow these steps:</p>
<ul class="simple">
<li><p>Load the XML file;</p></li>
<li><p>Examine the structure of the XML file;</p></li>
<li><p>Extract the plain text;</p></li>
<li><p>Divide the plain text into seperate articles;</p></li>
<li><p>Extract the page number;</p></li>
<li><p>Save the content in one file and in seperate textfiles;</p></li>
</ul>
<p>Open a new Jupyter Notebook and type all code examples and code exercises in your Notebook.
(see explantion in <span class="xref std std-ref">ET:import</span>)</p>
<div class="section" id="import-elementree-and-import-the-xml-file">
<h2>Import ElemenTree and import the xml file<a class="headerlink" href="#import-elementree-and-import-the-xml-file" title="Permalink to this headline">¶</a></h2>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>Import the package and load the xml file.</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>import xml.etree.ElementTree as ET

tree = ET.parse(&#39;xml-workshop/data/alto.xml&#39;)
root = tree.getroot()
</pre></div>
</div>
</div>
</div>
<div class="section" id="examine-the-structure-of-the-file">
<h2>Examine the structure of the file<a class="headerlink" href="#examine-the-structure-of-the-file" title="Permalink to this headline">¶</a></h2>
<p>Before you can extraxt content from a XML file, you have to see what inside and how it is structured.</p>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>Show the XML file in your Notebook</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>print(ET.tostring(root, encoding=&#39;utf8&#39;).decode(&#39;utf8&#39;))
</pre></div>
</div>
</div>
<p>As you can see, this XML file has a lot more elements and attributes than our example file.
Our goal is to extraxt the text from the news paper, to seperate the text into articles and to store them on our computer with the page number.</p>
<p>So first, lets see if we can see where the textual content of the news paper is stored.</p>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>Scroll through the XML file and see if you can find the element in which the text of the newspaper is stored. Hint: one of the news articles mentioned
‘olifant’.</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<p>The content of the news paper articles is stored in the element ‘ns0:String’</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;String ID=&quot;P3_ST00483&quot; HPOS=&quot;557&quot; VPOS=&quot;3994&quot; WIDTH=&quot;109&quot; HEIGHT=&quot;26&quot; CONTENT=&quot;olifant&quot; WC=&quot;0.99&quot; CC=&quot;6000010&quot;/&gt;
</pre></div>
</div>
</div>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>If we compare the element ‘String’ to our example XML, we see that there is a difference in how the content is stored. What is the difference?</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<p>The content of the elements of the example XML where stored als values from the elements.
The content of the String element is stored in an attribute called ‘CONTENT’.</p>
</div>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>There are a lot of nested element in this XML file. What are the parents, grand parents and grand grandparents of the ‘String’ element? Are their more parents than this?</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<p>The parent of the ‘String’ element is ‘Textline’
The grandparent is ‘TextBlock’
The grandgrandparent is ‘Page’.
The complete line is alto/Layout/Page/TextBlock/Textline/String</p>
</div>
<p>Now we know some first important information about this Alto file, so let’s see if we can extract the content.</p>
</div>
<div class="section" id="extract-the-plain-text">
<h2>Extract the plain text<a class="headerlink" href="#extract-the-plain-text" title="Permalink to this headline">¶</a></h2>
<p>We will start by extracting all the text, without worrying about the division between the articles.</p>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>As you have seen, the plain text of the news paper is stored in the ‘CONTENT’ attribute of the ‘String’ element. How can you extract the values from attributes?</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<p>This can be done with the .get method, for example: book.get(‘id’).</p>
</div>
<p>We learned in lesson 4 that you can acces the elements with a for loop, like</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
</pre></div>
</div>
<p>However, as you have seen above, the element ‘String’ is a grandgrandgrandgrandchild from the start element ‘alto’.
One way to access the String element is by typing all ancestors, leading to a code like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;alto/Layout/Page/TextBlock/Textline/String&#39;</span><span class="p">):</span>
</pre></div>
</div>
<p>However, we preferably avoid that, since it takes a lot of time and leads easliy to mistake.</p>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>In lesson 4, we learned a way to escapte all the ancestors, how did you do this?</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<p>By adding ‘.//’, for example  for book in root.findall(‘’.//author’):</p>
</div>
<p>So, we can easily loop through all String elements by using the .// escape, and we can extract the content from the CONTENT attribute with the .get method.</p>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>Create the for loop to extract the content. This loop looks like this:
for text in the String elements:
print(the value of the CONTENT attribute)
Complete the code and run it. What happens?</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for book in root.findall(&#39;ns0:String&#39;):
	print(book.get(&#39;CONTENT&#39;))
</pre></div>
</div>
<p>The code doesn’t produce any outcome.</p>
</div>
<div class="section" id="namespaces">
<h3>namespaces<a class="headerlink" href="#namespaces" title="Permalink to this headline">¶</a></h3>
<p>So, what is going on? Why isn’t there any output?
As described in lesson <em><strong>2</strong></em>, some XML documents make use of <em>namespaces</em>.
If we look at the first line of the Alto file, we see:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf8&#39;?&gt;
&lt;ns0:alto xmlns:ns0=&quot;http://schema.ccs-gmbh.com/ALTO&quot;&gt;
</pre></div>
</div>
<p>The second line shows us that this XML make use of namespaces.
‘ns0’ is used as a shortcut for ‘<a class="reference external" href="http://schema.ccs-gmbh.com/ALTO">http://schema.ccs-gmbh.com/ALTO</a>’.</p>
<p>We have now to options to handle the namespaces in ElemenTree:</p>
<ol class="simple">
<li><p>Type the namespace before the elementname between curly brackets: {<a class="reference external" href="http://schema.ccs-gmbh.com/ALTO">http://schema.ccs-gmbh.com/ALTO</a>}</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;.//{http://schema.ccs-gmbh.com/ALTO}String&#39;</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</pre></div>
</div>
<ol class="simple">
<li><p>Declare the namespace in elemenTree. You therefore provide Python with a dictionary of the used namespaces, which it can use.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ns0&#39;</span><span class="p">:</span> <span class="s1">&#39;http://schema.ccs-gmbh.com/ALTO&#39;</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<p>Now you can use the abbreviation of the namespace in your code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;.//ns0:String&#39;</span><span class="p">,</span> <span class="n">ns</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;CONTENT&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you declare the namespace in Python with a dictionary, to not forget to put ‘, ns’ after your elementname in the findall.
Without this ns, Python does not recognize the namespace.
You only have to declare the namespaces ones, Python will then recognize them in de rest of your Jupyter Notebook.</p>
</div>
<p>For the remainder of this lesson, we will use the second option.</p>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>Choose one of the namespace option and run the code to extract all the text from the CONTENT attribute.</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for book in root.findall(&#39;.//ns0:String&#39;, ns):
	print(book.get(&#39;CONTENT&#39;))		
</pre></div>
</div>
</div>
</div>
<div class="section" id="this-is-old-stuff">
<h3>This is old stuff!<a class="headerlink" href="#this-is-old-stuff" title="Permalink to this headline">¶</a></h3>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>Look at the XML structure. Which elements do we need do find the title and the description?</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<p>We need the child element ‘book’, and his subchildren ‘title’ and ‘description’.</p>
</div>
<p>First, type the following code in your Jupyter Notebook to get the title from every book:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This cell should have its output hidden!</span>
<span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [2],</span> in <span class="ni">&lt;cell line: 2&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># This cell should have its output hidden!</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span>     <span class="n">title</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="nb">print</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;root&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Explanation of the code.
The line:
<code class="docutils literal notranslate"> <span class="pre">	for</span> <span class="pre">book</span> <span class="pre">in</span> <span class="pre">root.findall('book'):</span>  </code>
starts loop that iterates through all ‘book’ elements in the XML. For each elements, it executes the rest of the code.
<code class="docutils literal notranslate">  <span class="pre">	title</span> <span class="pre">=</span> <span class="pre">book.find('title').text</span>  </code>
This line creates a new variabele called ‘title’. The content of the variable is content from the XML. For every ‘book’ elements, it searchs for
a child element with the name ‘title’. Then, it extraxts the content from the title element. To extract contents from elements, we use .text.
<code class="docutils literal notranslate"> <span class="pre">	title</span> <span class="pre">=</span> <span class="pre">book.find('title').text</span>  </code>
This line displays the output. In this case, it shows the title of every book.</p>
</div>
<p>We can get the description of each book in the same way.</p>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>Alter the code above to retreive all the descriptions and print out the descriptions.</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for book in root.findall(&#39;book&#39;):
	description = book.find(&#39;description&#39;).text
	print(description)
</pre></div>
</div>
</div>
<p>We can use one for loop to extract both the book title and description from the XML file.
Combining multiple items is preferable because it save unnecessary lines of codes and merges the part of code which does the same thing.
This makes the code more readable and maintainable.</p>
<p>Combining the two codes above leads to the following code:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This cell should have its output hidden!</span>
<span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
	<span class="n">title</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
	<span class="n">description</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
	<span class="nb">print</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="extract-name-and-surname-of-the-author">
<h2>Extract name and surname of the author<a class="headerlink" href="#extract-name-and-surname-of-the-author" title="Permalink to this headline">¶</a></h2>
<p>You can use the same method as described above to extraxt all names and surname from the authors from the XML.
However, if we look at the structure of the xml file, there is a different between the place of the elements ‘title’ and ‘description’
and the elements ‘name’ and ‘surname’.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">catalog</span><span class="o">&gt;</span>
	<span class="o">&lt;</span><span class="n">book</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;bk101&quot;</span><span class="o">&gt;</span>
		<span class="o">&lt;</span><span class="n">author</span><span class="o">&gt;</span>
			<span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">Matthew</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
			<span class="o">&lt;</span><span class="n">surname</span><span class="o">&gt;</span><span class="n">Gambardella</span><span class="o">&lt;/</span><span class="n">surname</span><span class="o">&gt;</span>
		<span class="o">&lt;/</span><span class="n">author</span><span class="o">&gt;</span>
		<span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">XML</span> <span class="n">Developer</span><span class="s1">&#39;s Guide&lt;/title&gt;</span>
		<span class="o">&lt;</span><span class="n">genre</span><span class="o">&gt;</span><span class="n">Computer</span><span class="o">&lt;/</span><span class="n">genre</span><span class="o">&gt;</span>
		<span class="o">&lt;</span><span class="n">price</span><span class="o">&gt;</span><span class="mf">44.95</span><span class="o">&lt;/</span><span class="n">price</span><span class="o">&gt;</span>
		<span class="o">&lt;</span><span class="n">publish_date</span><span class="o">&gt;</span><span class="mi">2000</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">01</span><span class="o">&lt;/</span><span class="n">publish_date</span><span class="o">&gt;</span>
		<span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span><span class="n">An</span> <span class="ow">in</span><span class="o">-</span><span class="n">depth</span> <span class="n">look</span> <span class="n">at</span> <span class="n">creating</span> <span class="n">applications</span> <span class="k">with</span> <span class="n">XML</span><span class="o">.&lt;/</span><span class="n">description</span><span class="o">&gt;</span>
   <span class="o">&lt;/</span><span class="n">book</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>Look at the XML snippet above. What is the difference between the element ‘title’ and the element ‘name’?</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<p>The element ‘title’ is a child of the element ‘book’.
The element ‘name’ however, is a child of the element ‘author’ and a <em>sub</em>child of the element ‘book’.</p>
</div>
<p>Because of the difference between the place of the elements, we need to alter our code a bit. Instead of one for loop, that iterates through all the ‘book’ elements,
we also need a for loop that runs through the ‘author’ element of book. We can do this with the following code:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This cell should have its output hidden!</span>
<span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">author</span> <span class="ow">in</span> <span class="n">book</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> 
</pre></div>
</div>
</div>
</div>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>The above code extraxts only the name of an author. Alter the code, so that it extracts both the name and the surname.</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for book in root.findall(&#39;book&#39;):
	for author in book.findall(&#39;author&#39;):
		name = author.find(&#39;name&#39;).text
		surname = author.find(&#39;surname&#39;).text
		print(name, surname) 
</pre></div>
</div>
</div>
</div>
<div class="section" id="extraxt-the-book-identifier">
<h2>Extraxt the book identifier<a class="headerlink" href="#extraxt-the-book-identifier" title="Permalink to this headline">¶</a></h2>
<p>As you can see in the XML, each book has its own <em><strong>identifier</strong></em>. As books can have the same name, and authors can have written multiple books, it
is good practise to always use the identifier to point to a specific item.</p>
<p>In the previous exercises, we extracted the content that was presented between the tags of an element.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">XML</span> <span class="n">Developers</span> <span class="n">Guide</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>In this example, you see that the title ‘XML Developer’s guide’ is stored between the tags <title> and </title>. We extracted this content by adding ‘.text’.</p>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>Look at this example of the ‘book’ element with its identifier. What is the difference between the place of the content of the identifier and the
place of the content of the title?
<code class="docutils literal notranslate"> <span class="pre">		&lt;book</span> <span class="pre">id=&quot;bk101&quot;&gt;</span> <span class="pre">		&lt;/book&gt;</span>  </code></p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<p>The content of the identifier is stored in an <em>atrribute</em> of the ‘book’ element, with the name ‘id’.</p>
</div>
<p>To extract content from attributes, we need to use a ‘get’ method.
We still use the for loop to iterate through all the books, but instead of the content of certain elements, we now extract the content of the attribute.</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This cell should have its output hidden!</span>
<span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">identifier</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="structure-all-information">
<h2>Structure all information<a class="headerlink" href="#structure-all-information" title="Permalink to this headline">¶</a></h2>
<p>We can combine the different codes we use above into one cell.
Therefore, we can use the following scheme:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Iterate</span> <span class="n">through</span> <span class="nb">all</span> <span class="n">books</span>	
	<span class="n">Get</span> <span class="n">content</span> <span class="kn">from</span> <span class="nn">id</span> <span class="n">attribute</span>
	<span class="n">Get</span> <span class="n">title</span> <span class="n">content</span>	
	<span class="n">Get</span> <span class="n">description</span> <span class="n">content</span>	
	<span class="n">Iterate</span> <span class="n">through</span> <span class="nb">all</span> <span class="n">authors</span>
		<span class="n">Get</span> <span class="n">name</span>
		<span class="n">Get</span> <span class="n">surname</span>
	<span class="n">Print</span> <span class="nb">id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">name</span> <span class="ow">and</span> <span class="n">surname</span>
</pre></div>
</div>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>Create the code that extraxts all information we used so far, from every book. And print this information (see scheme above).</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for book in root.findall(&#39;book&#39;):
	identifier = book.get(&#39;id&#39;)
	title = book.find(&#39;title&#39;).text
	description = book.find(&#39;description&#39;).text
	for author in book.findall(&#39;author&#39;):
		name = author.find(&#39;name&#39;).text
		surname = author.find(&#39;surname&#39;).text
	print(identifier, title, description, name, surname)
</pre></div>
</div>
</div>
<p>This leads to the following output:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This cell should have its input hidden!</span>
<span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
	<span class="n">identifier</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
	<span class="n">title</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
	<span class="n">description</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
	<span class="k">for</span> <span class="n">author</span> <span class="ow">in</span> <span class="n">book</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">):</span>
		<span class="n">name</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
		<span class="n">surname</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;surname&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
	<span class="nb">print</span><span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">surname</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>As you can see, it displays all information we wanted, but the output is quite unreadable. For example, it is not clear which part of the content belongs
to the title, and which to the description.</p>
<p>To make the output more readable, we can put text before our output variabelen. In Python, this can be done like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;This is the string we type and </span><span class="si">{</span><span class="n">this_is_the_variable</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>So in our example, this leads to:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This cell should have its input hidden!</span>
<span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="k">for</span> <span class="n">author</span> <span class="ow">in</span> <span class="n">book</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
        <span class="n">surname</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;surname&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Identifier= </span><span class="si">{</span><span class="n">identifier</span> <span class="si">}</span><span class="s2"> title= </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2"> description= </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2"> name= </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">surname</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>As you can see, we can now detect the various parts that we extracted. However, it is still not easy to read.
To resolve this, we can add linebreaks between each variable and between the different books. We add a line break by adding ‘\n’ after each variable,
leading to the following code:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This cell should have its input hidden!</span>
<span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="k">for</span> <span class="n">author</span> <span class="ow">in</span> <span class="n">book</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
        <span class="n">surname</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;surname&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Identifier= </span><span class="si">{</span><span class="n">identifier</span> <span class="si">}</span><span class="se">\n</span><span class="s2"> title= </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="se">\n</span><span class="s2"> description= </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s2"> </span><span class="se">\n</span><span class="s2"> name= </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">surname</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Well, that output looks way better, doesn’t it?</p>
</div>
<div class="section" id="store-the-information-in-a-csv-or-txt-file">
<h2>Store the information in a .csv or .txt file.<a class="headerlink" href="#store-the-information-in-a-csv-or-txt-file" title="Permalink to this headline">¶</a></h2>
<p>We show you how to store the output in two different ways:</p>
<ul class="simple">
<li><p>as one file with the information of all books in .csv format (which, for example, can be opened in Excel)</p></li>
<li><p>as one textfile per book.</p></li>
</ul>
<div class="section" id="store-in-one-file">
<h3>Store in one file<a class="headerlink" href="#store-in-one-file" title="Permalink to this headline">¶</a></h3>
<p>The easiest way to store and save Python output in one file is through storing it in a datframe from the Python package ‘Pandas’ and then save this frame.
You can add data directly from the for loops we created above in a pandas dataframe, but we prefer the method in which you first create a list and then transform
this list in the output, as Pandas DataFrame execution can become fairly slow with large amounts of data.</p>
<p>To create a list, we first have to declare an empty list. This is done with the following syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">booklist</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<p>Now, we alter our for loop a bit. Instead of printing the output to the screen, as we did above, we store our output in a list.
We therefor use the following code:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This cell should have its input hidden!</span>
<span class="n">booklist</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="k">for</span> <span class="n">author</span> <span class="ow">in</span> <span class="n">book</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
        <span class="n">surname</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;surname&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="n">booklist</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">identifier</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">name</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="n">surname</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>This leads to a list, called ‘booklist’, in which for every book all information is stored.</p>
<p>We can then easily transform this list to a pandas DataFrame.
To do so, we need to import pandas first with the comment</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
<p>Then we type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">books</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">booklist</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;identifier&quot;</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This code works as follows. You declare the variable ‘books’, which wil be used to store all the information.
Then you let Python know that you want to create a DataFrame. The content of this dataframe is the list ‘booklist’, which we just created.
We then tell Python what we want the name of all columns to be (this is in the same order as the order of the variables in the list).</p>
<p>You can show the dataframe you just created by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">books</span>
</pre></div>
</div>
<p>This results in the following output:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This cell should have its input hidden!</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">books</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">booklist</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;identifier&quot;</span><span class="p">,</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">})</span>
<span class="n">books</span>
</pre></div>
</div>
</div>
</div>
<p>Now we can save this dataframe into a csv file by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">books</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;book.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-textfile-per-book">
<h3>Create a textfile per book<a class="headerlink" href="#create-a-textfile-per-book" title="Permalink to this headline">¶</a></h3>
<p>If you want to create a textfile for every book, you can add the code directly in your for loop.</p>
<p>First, you have to declare a textfile in Python and give it a name. Then, you can open the file and write content to it. After this, you close the file.
You can try this with the following code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">myfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;This is just a test file&#39;</span><span class="p">)</span>
<span class="n">myfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, Python stores the text file in the same folder as where you run your Jupyter Notebook. You can alter this by adding a path to your textfile, for example:
<code class="docutils literal notranslate"><span class="pre">myfile</span> <span class="pre">=</span> <span class="pre">open('C:/Users/Documents/test.txt',</span> <span class="pre">'w')</span></code>
Please remember to use a backward slash (/) between the folders</p>
</div>
<p>With a few alterations, we can use this code to save our book information per file.
First, we give the textfile the name of the book identifier. we can do that by adding the variable into the name of the file like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span> <span class="n">myfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">identifier</span><span class="o">+</span><span class="s1">&#39;.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, we create the content of the file based on the content we exracted from the book.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">myfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="n">surname</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">title</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">description</span><span class="p">)</span>
</pre></div>
</div>
<p>If we put these line into our for loop, Python will save every book with its own name and own information.
This code looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
    <span class="n">identifier</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="n">description</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;description&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="k">for</span> <span class="n">author</span> <span class="ow">in</span> <span class="n">book</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;author&#39;</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
        <span class="n">surname</span> <span class="o">=</span> <span class="n">author</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;surname&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="n">myfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">identifier</span><span class="o">+</span><span class="s1">&#39;.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
    <span class="n">myfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">name</span><span class="o">+</span><span class="n">surname</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">title</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">description</span><span class="p">)</span>
    <span class="n">myfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="extra-filter-information">
<h2>Extra: Filter information<a class="headerlink" href="#extra-filter-information" title="Permalink to this headline">¶</a></h2>
<p>You can also search for specific elements in you XML. For example, only the title information from the book ‘bk109’.
To do so, you can start with the same for loop as we created in this lessons. However, before you print the output, you first check
if you have the element you want (in this case: book 109). This can be done with an ‘if’ statement and it looks like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">book</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]</span><span class="o">==</span><span class="s2">&quot;bk109&quot;</span><span class="p">:</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>You can also search the content from xml elements, searching the content for a match. For example, if we want to print all title that contain the word ‘XML’,
we can use the following code:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s1">&#39;book&#39;</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">book</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
    <span class="k">if</span> <span class="s2">&quot;XML&quot;</span> <span class="ow">in</span> <span class="n">title</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Strings in Python are capital senstive! This means that ‘XML’ is not equal to ‘xml’ or ‘Xml’ in Python.</p>
</div>
<div class="attention admonition">
<p class="admonition-title">Exercise</p>
<p>Print out the title of all books that have England in their description.</p>
</div>
<div class="tip dropdown admonition">
<p class="admonition-title">Solution</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for book in root.findall(&#39;book&#39;):
	description = book.find(&#39;description&#39;).text
	if &quot;England&quot; in description:
		print(book.find(&#39;description&#39;).text)
</pre></div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="6_xmlformats_intro.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">6. Introduction to the Alto, TEI and Page format</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="8_tei_ET.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">8. Practical session: Alto and Elementree</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Mirjam Cuper & Ethan den Boer<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>